{% extends 'stats/base.html' %}
{% load main_filters %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-lg-6">
            <h2 class="leaders-heading">Leaders - PPG</h2>
            <hr class="divider">
            <div class="leaders">
                <ul class="leader-list">
                    {% for player in leading_scorers %}
                        <li class="leader-item">
                            <a href="{% url 'player_gamelog' player.id %}" class="leader-name">{{ player.name }}</a>
                            <span class="leader-stat">{{ player.ppg }} PPG</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

<table class="table table-striped table-hover table-responsive">
    <thead>
        <tr>
            <th scope="col" style="text-transform: capitalize;">PLAYER</th>
            <th scope="col" style="text-transform: capitalize;">GP</th>
            {% for header in sort_options %} 
                <th scope="col">{{ header }}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for player_data in sorted_stats %}
            <tr>
                <td>{{ player_data.1.name }}</td>
                <td>{{ player_data.1.yearly_stats.totals.gp }}</td>
                {% if index_to_use == 'averages' %}
                    <td>{{ player_data.1.yearly_stats.averages.gmsc }}</td>
                    <td>{{ player_data.1.yearly_stats.averages.ppg }}</td>
                    <td>{{ player_data.1.yearly_stats.averages.rpg }}</td>
                    <td>{{ player_data.1.yearly_stats.averages.apg }}</td>
                    <td>{{ player_data.1.yearly_stats.averages.spg }}</td>
                    <td>{{ player_data.1.yearly_stats.averages.bpg }}</td>
                    <td>{{ player_data.1.yearly_stats.averages.tpg }}</td>
                    <td>{{ player_data.1.yearly_stats.averages.fpg }}</td>
                    <td>{{ player_data.1.yearly_stats.averages.fgp }}</td>
                    <td>{{ player_data.1.yearly_stats.averages.tpp }}</td>
                    <td>{{ player_data.1.yearly_stats.averages.ftp }}</td>
                {% elif index_to_use == 'totals' %}
                    <td>{{ player_data.1.yearly_stats.totals.pts }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.reb }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.ast }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.stl }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.blk }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.tov }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.fouls }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.fgm }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.fga }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.tpm }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.tpa }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.ftm }}</td>
                    <td>{{ player_data.1.yearly_stats.totals.fta }}</td>
                {% endif %}
            </tr>
        {% endfor %}
    </tbody>
</table>
    <div class="standings-section">
        <h2 class="standings-heading">Standings</h2>
        <hr class="divider">
        <div class="table-responsive">
            <table class="standings-table table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col">TEAM</th>
                        <th scope="col">W</th>
                        <th scope="col">L</th>
                        <th scope="col">PCT</th>
                        <th scope="col">GB</th>
                    </tr>
                </thead>
                <tbody>
                    {% for team, team_data in current_season.standings.items %}
                        <tr>
                            <td>{{ team }}</td>
                            <td>{{ team_data.wins }}</td>
                            <td>{{ team_data.losses }}</td>
                            <td>{{ team_data.percentage }}</td>
                            <td>{{ team_data.games_behind }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
